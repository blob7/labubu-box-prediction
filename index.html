<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Box Item Probability Tool</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main>
    <h1>Box ↔ Item Probability Explorer</h1>

    <section class="config">
      <div id="itemsListContainer">
        <h3>Items (one per box)</h3>
        <ul id="itemsList"></ul>
        <button id="addItemBtn">+ Add item</button>
      </div>
      <div class="actions">
        <button id="generateBtn">Generate Boxes / Reset Hints</button>
        <button id="randomAssignBtn">Random assignment (simulation)</button>
        <button id="clearSimBtn">Clear simulation</button>
      </div>
        <div class="computeControls" style="margin-top:10px; display:flex;flex-direction:column;gap:6px;">
          <div id="status" class="small" aria-live="polite" style="margin-top:0"></div>
          <div id="progressWrap" style="margin-top:6px; display:none">
            <div id="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
          </div>
          <label id="computeModeLabel" class="small">Computation mode:
            <select id="computeMode">
              <option value="auto">Auto (exact for small n, sampling for large n)</option>
              <option value="sample">Sampling (approx)</option>
              <option value="exact">Exact (may be slow)</option>
            </select>
          </label>
          <label id="sampleSizeLabel" class="small">Sample size:
            <input id="sampleSizeInput" type="number" min="100" max="1000000" step="100" value="20000" style="width:110px" />
          </label>
        </div>
    </section>

    <section id="boxesSection">
      <h2>Boxes</h2>
      <div id="boxesGrid" class="grid"></div>
    </section>

    <section id="breakdown">
      <h2>Breakdown</h2>
      <div id="bestForItem"></div>
      <div id="avoidForItem"></div>
    </section>

    <section id="notes">
      <h3>Notes</h3>
      <p>Exact odds are calculated from all valid combinations. With more than 9 items, it uses a quicker estimate instead and shows progress as it works.</p>

      <h4>What is a permutation?</h4>
      <p>In this app a permutation is one possible way to place the set of items into the boxes so that each box has exactly one item and every item appears once. For example, if you have three items A, B and C and three boxes, one permutation is:</p>
      <ul>
        <li>Box 1 → A, Box 2 → B, Box 3 → C</li>
      </ul>
      <p>Another permutation is Box 1 → B, Box 2 → C, Box 3 → A. The app checks every permutation that doesn't contradict your hints and counts how many times each item appears in each box across all valid permutations. Those counts are converted to probabilities.</p>

      <h4>Why permutations get expensive</h4>
      <p>The number of permutations grows very fast: for n items there are n! (n factorial) permutations. Example sizes:</p>
      <ul>
        <li>3 items → 6 permutations (3! = 6)</li>
        <li>6 items → 720 permutations (6! = 720)</li>
        <li>10 items → 3,628,800 permutations (10! = 3,628,800)</li>
      </ul>
      <p>Because of that exponential growth, the page uses exact enumeration for small n and switches to sampling for larger n to keep the UI responsive. The status line will show progress while sampling.</p>
    <i>If you found this helpful consider giving me a ⭐ on <a href="https://github.com/your-repo">GitHub</a>!</i>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
